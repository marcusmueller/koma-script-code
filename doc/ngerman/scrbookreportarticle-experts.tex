% ======================================================================
% scrbookreportarticle-experts.tex
% Copyright (c) Markus Kohm, 2001-2016
%
% This file is part of the LaTeX2e KOMA-Script bundle.
%
% This work may be distributed and/or modified under the conditions of
% the LaTeX Project Public License, version 1.3c of the license.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3c or later is part of all distributions of LaTeX 
% version 2005/12/01 or later and of this work.
%
% This work has the LPPL maintenance status "author-maintained".
%
% The Current Maintainer and author of this work is Markus Kohm.
%
% This work consists of all files listed in manifest.txt.
% ----------------------------------------------------------------------
% scrbookreportarticle-experts.tex
% Copyright (c) Markus Kohm, 2001-2016
%
% Dieses Werk darf nach den Bedingungen der LaTeX Project Public Lizenz,
% Version 1.3c, verteilt und/oder veraendert werden.
% Die neuste Version dieser Lizenz ist
%   http://www.latex-project.org/lppl.txt
% und Version 1.3c ist Teil aller Verteilungen von LaTeX
% Version 2005/12/01 oder spaeter und dieses Werks.
%
% Dieses Werk hat den LPPL-Verwaltungs-Status "author-maintained"
% (allein durch den Autor verwaltet).
%
% Der Aktuelle Verwalter und Autor dieses Werkes ist Markus Kohm.
% 
% Dieses Werk besteht aus den in manifest.txt aufgefuehrten Dateien.
% ======================================================================
%
% Chapter about scrbook, scrreprt, and scrartcl of the KOMA-Script guide
% expert part
% Maintained by Markus Kohm
%
% ----------------------------------------------------------------------
%
% Kapitel über scrbook, scrreprt und scrartcl im Experten-Teil der
% KOMA-Script-Anleitung
% Verwaltet von Markus Kohm
%
% ============================================================================

\KOMAProvidesFile{scrbookreportarticle-experts.tex}%
                 [$Date$
                  KOMA-Script guide (chapter: scrbook, scrreprt, scrartcl for
                  experts)]

\chapter[{Zusätzliche Informationen zu den Hauptklassen und 
  \Package{scrextend}}]{Zusätzliche
  Informationen zu den Hauptklassen 
  \Class{scrbook}, \Class{scrreprt} und
  \Class{scrartcl} sowie dem 
  Paket \Package{scrextend}}
\labelbase{maincls-experts}

In diesem Kapitel finden Sie zusätzliche Informationen zu den
\KOMAScript-Klassen \Class{scrbook}, \Class{scrreprt} und \Class{scrartcl} und
einigen Anweisungen, die auch in \Package{scrextend} vorhanden sind.
\iffree{Einige Teile des Kapitels sind dabei dem \KOMAScript-Buch
  \cite{book:komascript} vorbehalten. Dies sollte kein Problem sein, denn
  der}{Der} normale Anwender, der die Klassen einfach nur verwenden will, wird
diese Informationen normalerweise nicht benötigen. Ein Teil der Informationen
richtet sich an Anwender, die ausgefallene Aufgaben lösen oder eigene Klassen
schreiben wollen, die auf einer der drei \KOMAScript-Klassen basieren. Ein
weiterer Teil der Informationen behandelt Möglichkeiten der Klassen, die aus
Gründen der Kompatibilität zu den Standardklassen oder früheren Versionen von
\KOMAScript{} existieren. Die Teile, die nur aus Gründen der Kompatibilität zu
früheren Versionen von \KOMAScript{} existieren, sind in serifenloser Schrift
gesetzt und sollten nicht mehr verwendet werden.

\LoadNonFree{scrbookreportarticle-experts}{0}

\iffree{}{\clearpage}% Umbruchoptimierung!!!

\section{Ergänzende Hinweise zu Benutzeranweisungen}
\seclabel{addInfos}

\LoadNonFree{scrbookreportarticle-experts}{1}


\section{Zusammenspiel von \KOMAScript{} und anderen Paketen}
\seclabel{coexistence}

\LoadNonFree{scrbookreportarticle-experts}{2}


\section{Anweisungen für Experten}
\seclabel{experts}

In diesem Abschnitt werden Anweisungen beschrieben, die für den normalen
Anwender kaum oder gar nicht von Interesse sind. Experten bieten diese
Anweisungen zusätzliche Möglichkeiten. Da die Beschreibungen für Experten
gedacht sind, sind sie kürzer gefasst.


% \subsection{Identifikation}
% \seclabel{identification}

\begin{Declaration}
  \Macro{KOMAClassName}\\
  \Macro{ClassName}
\end{Declaration}
\BeginIndex{Cmd}{KOMAClassName}%
\BeginIndex{Cmd}{ClassName}%
In \Macro{KOMAClassName} ist der Name der aktuell verwendeten
\KOMAScript-Klasse abgelegt. Will man also wissen, ob eine oder welche
\KOMAScript-Klasse verwendet wird, so kann man einfach auf diese Anweisung
testen. Demgegenüber gibt \Macro{ClassName} Auskunft, welche Standardklasse
durch diese \KOMAScript-Klasse ersetzt wird.

Es\textnote{Achtung!} sei in diesem Zusammenhang darauf hingewiesen, dass
demgegenüber die Existenz von \Macro{KOMAScript}\IndexCmd{KOMAScript} nicht
als Indiz für die Verwendung einer \KOMAScript-Klasse dienen kann. Zum einen
definieren alle \KOMAScript-Pakete diese Anweisung, zum anderen können auch
andere Pakete es für sinnvoll erachten, das \KOMAScript-Piktogramm unter
diesem Namen zu definieren.%
\EndIndex{Cmd}{ClassName}%
\EndIndex{Cmd}{KOMAClassName}%

% \subsection{Einträge ins Inhaltsverzeichnis}
% \seclabel{toc}

\begin{Declaration}
  \Macro{addtocentrydefault}\Parameter{Ebene}\Parameter{Nummer}%
  \Parameter{Überschrift}
\end{Declaration}
\BeginIndex{Cmd}{addtocentrydefault}%
Die\ChangedAt{v3.08}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} \KOMAScript-Klassen verwenden
\Macro{addcontentsline}\IndexCmd{addcontentsline}%
\important{\Macro{addcontentsline}} nicht direkt, um Einträge ins
Inhaltsverzeichnis vorzunehmen. Stattdessen wird \Macro{addtocentrydefault}
mit ganz ähnlichen Argumenten aufgerufen. Die Anweisung kann sowohl für
nummerierte als auch für nicht nummerierte Einträge verwendet werden. Dabei
gibt \PName{Ebene} die Gliederungsebene in Textform also \PValue{part},
\PValue{chapter}, \PValue{section}, \PValue{subsection},
\PValue{subsubsection}, \PValue{paragraph} oder \PValue{subparagraph} an. Die
formatierte Gliederungsnummer wird über das zweite Argument \PName{Nummer}
übergeben. Dieses Argument darf auch leer sein. Der Text des Eintrags wird mit
\PName{Überschrift} angegeben. Es wird empfohlen zerbrechliche Befehle in
diesem Argument mit
\Macro{protect}\IndexCmd{protect}\important{\Macro{protect}} zu schützen.

Für das Argument \PName{Nummer} gilt noch eine Besonderheit. Ist das Argument
leer, so signalisiert dies, dass ein nicht nummerierter Eintrag erzeugt werden
soll. In der Voreinstellung wird dies mit
\begin{quote}\small\raggedright
  \Macro{addcontentsline}\PParameter{toc}\Parameter{Ebene}%
  \PParameter{\%\\
    \quad\Macro{protect}\Macro{nonumberline} \PName{Überschrift}\%\\
  }
\end{quote}
erreicht. Ist das Argument jedoch nicht leer, so soll ein nummerierter Eintrag
erzeugt werden und \PName{Nummer} ist die vorformatierte Gliederungsnummer. In
der Voreinstellung verwendet \KOMAScript{}
\begin{quote}\small\raggedright
  \Macro{addcontentsline}\PParameter{toc}\Parameter{Ebene}%
  \PParameter{\%\\
    \quad\Macro{protect}\Macro{numberline}\Parameter{Nummer}%
    \PName{Überschrift}\%\\
  }
\end{quote}
zur Erzeugung dieses Eintrags.

Paketautoren und Autoren von Wrapper-Klassen können diese Anweisung
umdefinieren, um Einfluss auf die Einträge zu nehmen. So\textnote{Beispiel}
wäre beispielsweise denkbar mit
\begin{lstcode}[belowskip=\dp\strutbox plus 1pt]
  \renewcommand{\addtocentrydefault}[3]{%
    \ifstr{#3}{}{%
    }{%
      \ifstr{#2}{}{%
        \addcontentsline{toc}{#1}{\protect\nonumberline#3}%
      }{%
        \addcontentsline{toc}{#1}{\protect\numberline{#2}#3}%
      }%
    }%
  }%
\end{lstcode}
dafür\IndexCmd{ifstr} zu sorgen, dass Einträge mit leerer \PName{Überschrift}
erst gar nicht vorgenommen werden. Eine solche Änderung ist in der Praxis
jedoch nicht notwendig, da die Unterdrückung leerer Einträge bereits auf
andere Weise in die \KOMAScript-Klassen eingebaut ist. Siehe hierzu auch die
Erklärung zu den Gliederungsbefehlen in \autoref{sec:maincls.structure} ab
\autopageref{desc:maincls.cmd.part}.%
%
\EndIndex{Cmd}{addtocentrydefault}

\begin{Declaration}
  \Macro{addparttocentry}\Parameter{Nummer}\Parameter{Überschrift}\\
  \Macro{addchaptertocentry}\Parameter{Nummer}\Parameter{Überschrift}\\
  \Macro{addsectiontocentry}\Parameter{Nummer}\Parameter{Überschrift}\\
  \Macro{addsubsectiontocentry}\Parameter{Nummer}\Parameter{Überschrift}\\
  \Macro{addsubsubsectiontocentry}\Parameter{Nummer}\Parameter{Überschrift}\\
  \Macro{addparagraphtocentry}\Parameter{Nummer}\Parameter{Überschrift}\\
  \Macro{addsubparagraphtocentry}\Parameter{Nummer}\Parameter{Überschrift}
\end{Declaration}%
\BeginIndex{Cmd}{addparttocentry}%
\BeginIndex{Cmd}{addchaptertocentry}%
\BeginIndex{Cmd}{addsectiontocentry}%
\BeginIndex{Cmd}{addsubsectiontocentry}%
\BeginIndex{Cmd}{addsubsubsectiontocentry}%
\BeginIndex{Cmd}{addparagraphtocentry}%
\BeginIndex{Cmd}{addsubparagraphtocentry}%
Auch \ChangedAt{v3.08}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} die oben dokumentierte Anweisung
\Macro{addtocentrydefault}\IndexCmd{addtocentrydefault}%
\important{\Macro{addtocentrydefault}} wird von den \KOMAScript-Klassen nur
dann direkt aufgerufen, wenn für die angegebene \PName{Ebene} keine direkte
Anweisung definiert oder diese
\Macro{relax}\IndexCmd{relax}\important{\Macro{relax}} ist. In der
Voreinstellung sind die angegebenen Anweisungen alle so definiert, dass sie
ihre \PName{Ebene} und die Argumente direkt an \Macro{addtocentrydefault}
weiter geben.%
%
\EndIndex{Cmd}{addsubparagraphtocentry}%
\EndIndex{Cmd}{addsubsubsectiontocentry}%
\EndIndex{Cmd}{addparagraphtocentry}%
\EndIndex{Cmd}{addsubsectiontocentry}%
\EndIndex{Cmd}{addsectiontocentry}%
\EndIndex{Cmd}{addchaptertocentry}%
\EndIndex{Cmd}{addparttocentry}%


\begin{Declaration}
  \Macro{raggedchapterentry}
\end{Declaration}
\BeginIndex{Cmd}{raggedchapterentry}%
Bei früheren\ChangedAt{v3.21}{\Class{scrbook}\and \Class{scrreprt}} Version
von \KOMAScript{} gab es die Möglichkeit das \Macro{raggedchapterentry} als
\Macro{raggedright} zu definieren, um den Text der Kapiteleinträge ins
Inhaltsverzeichnis im linksbündigen Flattersatz zu setzen. Offiziell existiert
diese Möglichkeit seit \KOMAScript-Version~3.21 nicht mehr.

Tatsächlich ist aber in \Package{tocbasic}\IndexPackage{tocbasic} Eigenschaft
\PValue{raggedentrytext} für den Stil \PValue{tocline} so definiert, dass sie
das Makro \Macro{ragged\PName{Eintragsebene}entry} entweder auf
\Macro{raggedright} oder auf \Macro{relax} setzt. Bei der Auswertung der
Eigenschaft wird dann getestet, ob das entsprechende Makro entweder
\Macro{raggedright} ist oder als \Macro{raggedright} definiert ist. In beiden
Fällen wird Flattersatz verwendet. In allen anderen Fällen wird kein
Flattersatz verwendet.

Da auch früher schon dokumentiert war, dass \Macro{raggedchapterentry} nicht
als etwas anderes als \Macro{raggedright} definiert werden sollte, ist damit
Kompatibilität zum dokumentierten Verhalten früherer Versionen erreicht. Wie
in früheren Versionen gewarnt, führen andere Definitionen von
\Macro{raggedchaperentry} -- nun aber auch von \Macro{raggedsectionentry} und
entsprechend für die anderen Eintragsebenen -- eventuell zu unerwarteten
Ergebnissen.

Empfohlen wird, eventuell gewünschten Flattersatz für Verzeichniseinträge
stattdessen über die genannte Eigenschaft des Verzeichniseintragsstils
\PValue{tocline} zu wählen.%
\EndIndex{Cmd}{raggedchapterentry}


% \subsection{Schrifteinstellungen}
% \seclabel{fonts}

\begin{Declaration}
  \Macro{@fontsizefilebase}\\
  \Macro{changefontsizes}\Parameter{Schriftgröße}
\end{Declaration}
\BeginIndex{Cmd}{@fontsizefilebase}%
\BeginIndex{Cmd}{changefontsizes}%
Der\iffree{ in \autoref{sec:maincls-experts.addInfos}}{} auf
\autopageref{desc:maincls-experts.option.fontsize} für die
Schriftgrößendateien angegebene Präfix \File{scrsize}, ist lediglich die
Voreinstellung für das interne Makro
\Macro{@fontsizefilebase}\IndexCmd{@fontsizefilebase}, die verwendet wird,
wenn das Makro beim Laden der Klasse oder des Pakets \Package{scrextend} noch
nicht definiert ist. Autoren von Wrapper-Klassen können dieses Makro
abweichend definieren, um andere Schriftgrößendateien zu
verwenden. Ebenso\textnote{Tipp!}  können Autoren von Wrapper-Klassen die
\emph{fallback}-Lösung dadurch ändern oder abschalten, dass sie das Macro
\Macro{changefontsizes}\important{\Macro{changefontsizes}}, das als Argument
die gewünschte \PName{Schriftgröße} erwartet, umdefinieren.%
\EndIndex{Cmd}{changefontsizes}%
\EndIndex{Cmd}{@fontsizefilebase}%


\begin{Declaration}
  \Macro{newkomafont}\OParameter{Warnung}\Parameter{Element}\Parameter{Voreinstellung}\\
  \Macro{aliaskomafont}\Parameter{Aliasname}\Parameter{Element}
\end{Declaration}
\BeginIndex{Cmd}{newkomafont}%
\BeginIndex{Cmd}{aliaskomafont}%
Experten können mit \Macro{newkomafont} eine \PName{Voreinstellung} für die
Schrift eines \PName{Element}s definieren. Anschließend kann diese
Voreinstellung mit den Anweisungen \Macro{setkomafont} und
\Macro{addtokomafont} (siehe \autoref{sec:maincls.textmarkup},
\autopageref{desc:maincls.cmd.setkomafont}) verändert werden. Natürlich wird
diese Schrift damit noch lange nicht verwendet. Der Experte muss selbst Sorge
dafür tragen, dass er an den entsprechenden Stellen die Anweisung
\Macro{usekomafont}\important{\Macro{usekomafont}}\IndexCmd{usekomafont}
(siehe \autopageref{desc:maincls.cmd.usekomafont}) für dieses Element in
seinen Definitionen einbaut.

Das optionale Argument \PName{Warnung} definiert eine Warnmeldung. Diese wird
bei den \KOMAScript-Klassen per \Macro{ClassWarning} oder beim Paket
\Package{scrextend} per \Macro{PackageWarning} immer dann ausgegeben, wenn die
Voreinstellung für das Element verändert wird. Dabei wird als Urheber der
Warnung die verwendete \KOMAScript-Klasse oder das Paket \Package{scrextend}
ausgegeben.

Mit \Macro{aliaskomafont} kann für ein bereits existierendes \PName{Element}
ein \PName{Aliasname} definiert werden. \KOMAScript{} informiert den Benutzer
automatisch über den Namen des tatsächlichen Elements, wenn dieser den
\PName{Aliasname} verwendet. \PName{Aliasname}n\textnote{Tipp!} können
beispielsweise dann eingesetzt werden, wenn der Entwickler sich später einen
besseren Namen für ein Element überlegt und der alte Name aus
Kompatibilitätsgründen weiter verwendbar bleiben soll. Außerdem kann damit die
Benutzerfreundlichkeit erhöht werden, indem einem Element all die Namen als
Alias zugeordnet werden, die unterschiedliche Benutzer intuitiv wählen
würden. \KOMAScript{} selbst macht von dieser Möglichkeit reichen Gebrauch.
%
\EndIndex{Cmd}{aliaskomafont}%
\EndIndex{Cmd}{newkomafont}%


\begin{Declaration}
  \Macro{addtokomafontrelaxlist}\Parameter{Makro}\\
  \Macro{addtokomafontgobblelist}\Parameter{Makro}
\end{Declaration}
\BeginIndex{Cmd}{addtokomafontrelaxlist}%
\BeginIndex{Cmd}{addtokomafontgobblelist}%
Wie bereits in \autoref{part:forAuthors} der Anleitung erklärt, dürfen in den
Schrifteinstellungen der Elemente nur Befehle zur Wahl der Größe, Familie,
Codierung, Strichstärke, Form und Farbe enthalten sein. Dabei erfolgt schon
die Änderung der Farbe bei \LaTeX{} nicht transparent und kann damit
unerwünschte Effekte hervorrufen, wenn man \Macro{usekomafont} an ungünstiger
Stelle verwendet. 

Nun neigen Anwender dazu, in die Schrifteinstellungen auch ganz andere,
teilweise sehr kritische Dinge zu packen, beispielsweise ein
\Macro{MakeUppercase} ganz am Ende der Einstellung. Bei der internen
Verwendung der Schrifteinstellungen wurde daher möglichst so vorgegangen, dass
viele dieser eigentlich verbotenen Einstellungen trotzdem keinen Schaden
anrichten und es meist sogar funktioniert, wenn der letzte Befehl in der
Schrifteinstellung ein Argument erwartet, also beispielsweise \Macro{textbf}
an Stelle von \Macro{bfseries} verwendet wird. Eine Garantie gibt es dafür
jedoch nicht. 

In Einzelfällen war es innerhalb von \KOMAScript{} notwendig, die Umschaltung
wirklich auf Schrifteinstellungen zu beschränken. Dies erfolgt dann
beispielsweise mit \Macro{usefontofkomafont}\IndexCmd{usefontofkomafont}%
\IndexCmd{usesizeofkomafont}\IndexCmd{useencodingofkomafont}%
\IndexCmd{usefamilyofkomafont}\IndexCmd{useseriesofkomafont}%
\IndexCmd{useshapeofkomafont} statt \Macro{usekomafont} (siehe
\autoref{sec:maincls.textmarkup},
\autopageref{desc:maincls.cmd.usefontofkomafont}).

Die Anweisung \Macro{usefontofkomafont} und ihre Geschwister haben allerdings
ihre Grenzen. Daher darf die vermeintliche Schrifteinstellung eines Elements
keinesfalls ein voll expandierbares Argument erwarten. Genau das ist aber
beispielsweise bei \Macro{MakeUppercase} der
Fall. Daher\ChangedAt{v3.17}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} verwaltet \KOMAScript{} eine interne Liste von Makros,
die innerhalb von \Macro{usefontofkomafont} und ihren Geschwistern zu
\Macro{relax} werden sollen. In der Voreinstellung sind das unter anderem:
\Macro{normalcolor}, \Macro{MakeUppercase} und
\Macro{MakeLowercase}. Weitere Anweisungen können mit
\Macro{addtokomafontrelaxlist} einzeln hinzugefügt werden.

Es ist zu beachten, dass das angegebene \PName{Makro} wirklich stur auf
\Macro{relax} gesetzt wird. Irgendwelche Argumente innerhalb der
Schrifteinstellung werden also gegebenenfalls lokal ausgeführt. Daher dürfen
Anweisungen wie \Macro{setlength} keinesfalls zu dieser Liste hinzugefügt
werden. Für alle Fehler, die durch die Verwendung von
\Macro{addtokomafontrelaxlist} entstehen, ist der Anwender selbst
verantwortlich. Außerdem sollte diese Möglichkeit nicht als Legitimation dafür
missverstanden werden, den Schrifteinstellungen alle möglichen Anweisungen
hinzuzufügen!

Soll\ChangedAt{v3.19}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} hingegen ein \PName{Makro} innerhalb
\Macro{usefontofkomafont} und ihren Geschwistern einschließen eines einzelnen
Arguments des Makros ignoriert werden, so ist stattdessen
\Macro{addtokomafontgobblelist} zu verwenden. Ein Beispiel dafür ist die
Anweisung \Macro{color}, die einschließlich des Namens der Farbe ignoriert
werden muss und deshalb bereits in der Voreinstellung Teil dieser Liste ist.%
\EndIndex{Cmd}{addtokomafontgobblelist}%
\EndIndex{Cmd}{addtokomafontrelaxlist}%


\begin{Declaration}
  \Macro{IfExistskomafont}\Parameter{Element}\Parameter{Dann-Code}%
  \Parameter{Sonst-Code}
\end{Declaration}
\BeginIndex{Cmd}{IfExistskomafont}%
Da\ChangedAt{v3.15}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}\and \Class{scrlttr2}} die Schrift mancher Elemente erst ab
bestimmten Versionen von \KOMAScript{} geändert werden können, ist es manchmal
sinnvoll, vorher testen zu können, ob ein \PName{Element} mit dieser
Möglichkeit überhaupt existiert. Die Anweisung führt den \PName{Dann-Code}
genau dann aus, wenn das \PName{Element} über \Macro{newkomafont} oder
\Macro{aliaskomafont} definiert wurde und daher auch mit \Macro{setkomafont}
oder \Macro{addtokomafont} geändert und mit den \Macro{use\dots
  komafont}-Anweisungen abgefragt werden kann. Anderenfalls wird der
\PName{Sonst-Code} ausgeführt.%
\EndIndex{Cmd}{IfExistskomafont}%

% \subsection{Absatzmarkierung}
% \seclabel{parskip}

\begin{Declaration}
  \Macro{setparsizes}\Parameter{Einzug}\Parameter{Abstand}%^^A
  \Parameter{Endzeilenleerraum}
\end{Declaration}
\BeginIndex{Cmd}{setparsizes}%
\KOMAScript{} bietet mit dieser Anweisung die Möglichkeit, sowohl den
Absatzeinzug, als auch den Absatzabstand und den Freiraum am Ende der letzten
Zeile des Absatzes einzustellen. Diese Anweisung ist immer dann zu verwenden,
wenn die Änderungen auch bei Einstellung \OptionValue{parskip}{relative}
beachtet werden sollen. \KOMAScript{}\textnote{Beispiel} selbst verwendet sie
beispielsweise in der Form
\begin{lstcode}[belowskip=\dp\strutbox plus 1ex]
  \setparsizes{0pt}{0pt}{0pt plus 1fil}
\end{lstcode}
um sowohl den Einzug als auch den Abstand abzuschalten und am Ende des
Absatzes beliebigen Freiraum zu erlauben. Eine solche Maßnahme ist sinnvoll,
wenn ein Absatz nur aus einer Box besteht, die ohne Abstand nach oben oder
unten gesetzt werden soll und die gesamte Spaltenbreite einnimmt. Soll
demgegenüber die Box nur die gesamte Breite einnehmen, jedoch mit der
aktuellen Einstellung bezüglich des Absatzabstandes gesetzt werden, so ist
\begin{lstcode}[belowskip=\dp\strutbox plus 1ex]
  \setlength{\parfillskip}{0pt plus 1fil}
\end{lstcode}
vorzuziehen.

Eine\ChangedAt{v3.17}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} Neuberechnung\IndexCmd{activateareas} oder Reaktivierung
der Einstellungen für den Satzspiegel und die Ränder (siehe
\autoref{cha:typearea}) führt seit \KOMAScript~3.17 übrigens immer auch zu
einer Neueinstellung der via \Macro{setparsizes} gesetzten Werte, falls die
Werte nicht zwischenzeitlich geändert wurden. Dies sollte ein Grund mehr sein,
nicht an \KOMAScript{} vorbei die Einstellungen zu ändern. Die Neuberechnung
wird bei einer Kompatibilitätseinstellung zu einer früheren Version (siehe
\autoref{sec:maincls.compatibilityOptions},
\autopageref{desc:maincls.option.version}, Option
\Option{version}\IndexOption{version}\important{\OptionValue{version}{3.17}})
deaktiviert.%
%
\EndIndex{Cmd}{setparsizes}%

% \subsection{Zähler}
% \seclabel{counter}

\LoadNonFree{scrbookreportarticle-experts}{3}

% \subsection{Gliederung}
% \seclabel{sections}

\begin{Declaration}
  \Macro{DeclareSectionCommand}\OParameter{Einstellungen}\Parameter{Name}\\
  \Macro{DeclareNewSectionCommand}\OParameter{Einstellungen}\Parameter{Name}\\
  \Macro{RedeclareSectionCommand}\OParameter{Einstellungen}\Parameter{Name}\\
  \Macro{ProvideSectionCommand}\OParameter{Einstellungen}\Parameter{Name}
\end{Declaration}
\BeginIndex{Cmd}{DeclareSectionCommand}%
\BeginIndex{Cmd}{DeclareNewSectionCommand}%
\BeginIndex{Cmd}{RedeclareSectionCommand}%
\BeginIndex{Cmd}{ProvideSectionCommand}%
Mit\ChangedAt{v3.15}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} diesen Anweisungen kann ein neuer Gliederungsbefehl
\Macro{\PName{Name}} definiert oder der vorhandene Gliederungsbefehl
\Macro{\PName{Name}} verändert werden. Dazu werden über das optionale Argument
\PName{Einstellungen} vorgenommen. Die \PName{Einstellungen} sind dabei eine
durch Komma separierte Liste von
\PName{Schlüssel}=\PName{Wert}-Zuweisungen. Neben den vom Stil der Überschrift
unabhängigen Eigenschaften, die
\autoref{tab:maincls-experts.declaresection.keys} zu entnehmen sind, gibt es
auch Eigenschaften, die vom jeweiligen Stil abhängig sind. Derzeit stehen die
folgenden Stile zur Verfügung:
\begin{labeling}{\PValue{chapter}:}
\item[\PValue{chapter}:] \ChangedAt{v3.18}{\Class{scrbook}\and
    \Class{scrreprt}}Stil\textnote{Gliederungsstil
  \PValue{chapter}}\Index{Gliederung>Stil>~\PValue{chapter}} einer
  Kapitelüberschrift. Dieser Stil wird in der Voreinstellung für
  \Macro{chapter}\IndexCmd{chapter} und indirekt für
  \Macro{addchap}\IndexCmd{addchap} verwendet. Neue Überschriften in diesem
  Stil können definiert werden, haben dann aber nicht automatisch auch eine
  \Macro{add\dots}-Variante. Für die Konfiguration des vorhandenen oder neuer
  Überschriften stehen zusätzlich die Eigenschaften aus
  \autoref{tab:maincls-experts.declarechapterstyle.keys},
  \autopageref{tab:maincls-experts.declarechapterstyle.keys} zur
  Verfügung. Die\textnote{Achtung!} Anweisung \Macro{addchap} wird ebenso wie
  die Sternformen automatisch zusammen mit \Macro{chapter} umkonfiguriert und
  kann nicht unabhängig davon verändert werden. Es ist zu beachten, dass
  dieser Stil von \Class{scrartcl}\OnlyAt{\Class{scrbook}\and
    \Class{scrreprt}} nicht bereitgestellt wird.
\item[\PValue{part}:] \ChangedAt{v3.18}{\Class{scrbook}\and
    \Class{scrreprt}\and \Class{scrartcl}}Stil\textnote{Gliederungsstil
    \PValue{part}}\Index{Gliederung>Stil>~\PValue{part}} einer
  Teileüberschrift.  Dieser Stil wird in der Voreinstellung für
  \Macro{part}\IndexCmd{part} und indirekt für
  \Macro{addpart}\IndexCmd{addpart} verwendet. Neue Überschriften in diesem
  Stil können definiert werden, haben dann aber nicht automatisch auch eine
  \Macro{add\dots}-Variante. Für die Konfiguration des vorhandenen oder neuer
  Überschriften stehen zusätzlich die Eigenschaften aus
  \autoref{tab:maincls-experts.declarepartstyle.keys},
  \autopageref{tab:maincls-experts.declarepartstyle.keys} zur
  Verfügung. Die\textnote{Achtung!}  Anweisung \Macro{addpart} wird ebenso wie
  die Sternformen automatisch zusammen mit \Macro{part} umkonfiguriert und
  kann nicht unabhängig davon verändert werden.
\item[\PValue{section}:] Stil\textnote{Gliederungsstil
    \PValue{section}}\Index{Gliederung>Stil>~\PValue{section}} einer
  Abschnittsüberschrift. Dieser Stil wird derzeit für
  \Macro{section}\IndexCmd{section}, \Macro{subsection}\IndexCmd{subsection},
  \Macro{subsubsection}\IndexCmd{subsubsection},
  \Macro{paragraph}\IndexCmd{paragraph} und
  \Macro{subparagraph}\IndexCmd{subparagraph} verwendet. Neue Überschriften in
  diesem Stil können definiert werden. Für die Konfigurierung der vorhandenen
  oder neuer Überschriften stehen zusätzlich die Eigenschaften aus
  \autoref{tab:maincls-experts.declaresectionstyle.keys},
  \autopageref{tab:maincls-experts.declaresectionstyle.keys} zur
  Verfügung. Bei der Neudefinition sind die \PName{Schlüssel} \PValue{style},
  \PValue{afterskip}, \PValue{beforeskip}, \PValue{font}, \PValue{indent},
  \PValue{level}, \PValue{tocindent} und \PValue{tocnumwidth} zwingend. Das
  gilt auch, falls ein Befehl, der bisher kein Gliederungsbefehl war, mit
  \Macro{RedeclareSectionCommand} zu einem Gliederungsbefehl umdefiniert wird.
  Die\textnote{Achtung!} Anweisung \Macro{addsec} wird ebenso wie die
  Sternformen automatisch zusammen mit \Macro{section} umkonfiguriert und kann
  nicht unabhängig davon verändert werden. Bei der Definition eines
  Gliederungsbefehls in diesem Stil wird gleichzeitig ein gleichnamiges
  Element angelegt, dessen Schrifteinstellung mit \Macro{setkomafont} und
  \Macro{addtokomafont} (siehe \autoref{sec:maincls.textmarkup},
  \autopageref{desc:maincls.cmd.setkomafont}) geändert werden kann, falls ein
  solches Element noch nicht existiert.
\end{labeling}

\begin{table}
  \caption[{Stil unabhängige Eigenschaften bei der Deklaration von
  Gliederungsbefehlen}]{Mögliche vom Stil der Überschrift unabhängige
    \PName{Schlüssel} und \PName{Werte} für die \PName{Eigenschaften} bei der
    Deklaration von Gliederungsbefehlen}%
    \label{tab:maincls-experts.declaresection.keys}%
  \begin{tabularx}{\linewidth}{llX}
    \toprule
    \PName{Schlüssel} & \PName{Wert} & Bedeutung \\
    \midrule
    \PValue{counterwithin} & \PName{Zählername} & 
                                          Der zur Gliederungsebene gehörende
                                          Zähler soll vom als Wert angegebenen
                                          Zähler abhängig sein. Wird
                                          \PName{Zählername} über
                                          \Macro{stepcounter} oder
                                          \Macro{refstepsounter} erhöht, so
                                          wird der zur Gliederungsebene
                                          gehörende Zähler auf 0
                                          zurückgesetzt. Darüber hinaus wird
                                          \Macro{the\PName{Zählername}}
                                          gefolgt von einem Punkt in
                                          der Ausgabe des zur Gliederungsebene
                                          gehörenden Zählers vorangestellt.\\
    \ChangedAt{v3.19}{\Class{scrbook}\and \Class{scrreprt}\and
      \Class{scrartl}}%
    \PValue{counterwithout} & \PName{Zählername} &
                                          Hebt eine früher vorgenommene
                                          \PValue{counterwithin}-Einstellung
                                          auf und ist daher nur bei Änderung
                                          vorhandener Gliederungsbefehle
                                          sinnvoll.\\
    \PValue{expandtopt} & \PName{Schalter} &
                                          Ist dieser Schalter aktiv, so werden
                                          alle in den \PName{Einstellungen}
                                          nachfolgend angegebenen Werte
                                          für Längen vollständig expandiert,
                                          ausgewertet und in \texttt{pt}
                                          umgerechnet gespeichert. 
                                          Ist der Schalter nicht aktiv, so
                                          werden alle nachfolgend angegebenen
                                          Werte für Längen nur testweise
                                          expandiert und ausgewertet aber
                                          lediglich expandiert gespeichert. 
                                          Es werden die Werte für einfache
                                          Schalter aus
                                          \autoref{tab:truefalseswitch},
                                          \autopageref{tab:truefalseswitch}
                                          verstanden.\\
    \PValue{level} & \PName{Ganzzahl}   & Nummerischer Wert der
                                          Gliederungsebene (siehe Zähler
                                          \Counter{secnumdepth};
                                          \autoref{desc:maincls.counter.secnumdepth});
                                          der Wert sollte eindeutig sein. \\
    \PValue{style} & \PName{Name}       & Legt den Stil der Überschriften
                                          fest.\\
    \ChangedAt[2016/03]{v3.20}{\Class{scrbook}\and \Class{scrreprt}\and
      \Class{scrartcl}}%
    \PValue{tocstyle} & \PName{Name}    & Legt den Stil der
                                          Verzeichniseinträge fest. Es können
                                          alle bisher definierten
                                          Verzeichniseintragsstile (siehe
                                          \autoref{sec:tocbasic.tocstyle})
                                          verwendet werden. Ein leerer
                                          \PName{Name} verhindert die
                                          Definition des Befehls für
                                          Verzeichniseinträge.\\
    % \PValue{tocindent} & \PName{Länge}  & Der horizontale Einzug des zum
    %                                       Gliederungsbefehls gehörenden
    %                                       Eintrags ins Inhaltsverzeichnis,
    %                                       falls ein solcher abhängig von
    %                                       \Counter{tocdepth} (siehe
    %                                       \autoref{sec:maincls.toc},
    %                                       \autopageref{desc:maincls.counter.tocdepth})
    %                                       erzeugt wird.\\ 
    % \PValue{toclevel} & \PName{Ganzzahl} & 
    %                                       Die Ebene des zum Gliederungsbefehl
    %                                       gehörenden Eintrags ins
    %                                       Inhaltsverzeichnis, falls diese von
    %                                       \PValue{level} abweichen soll
    %                                       (siehe auch \Counter{tocdepth} in
    %                                       \autoref{sec:maincls.toc},
    %                                       \autopageref{desc:maincls.counter.tocdepth}). \\
    % \PValue{tocnumwidth} & \PName{Länge}& Die Breite, die für die
    %                                       Gliederungsnummer im zum 
    %                                       Gliederungsbefehl gehörenden Eintrag
    %                                       ins Inhaltsverzeichnis reserviert
    %                                       wird.\\
    \bottomrule
  \end{tabularx}
\end{table}

\begin{table}
  \caption[{Eigenschaften des Stils \PValue{section} bei der Deklaration von
    Gliederungsbefehlen}]{Zusätzliche \PName{Schlüssel} und \PName{Werte} für
    die \PName{Eigenschaften} bei der Deklaration von Gliederungsbefehlen des
    Stils \PValue{section}\Index{Gliederung>Stil>~\PValue{section}}}%
  \label{tab:maincls-experts.declaresectionstyle.keys}%
  \begin{tabularx}{\linewidth}{llX}
    \toprule
    \PName{Schlüssel} & \PName{Wert} & Bedeutung \\
    \midrule
    \PValue{afterskip} & \PName{Länge}  & Ein negativer Wert bedeutet, dass
                                          die Überschrift als Spitzmarke
                                          formatiert werden soll. Der
                                          Betrag gibt dabei den
                                          horizontalen Abstand nach der
                                          Überschrift an. Ein positiver Wert
                                          führt hingegen zu einem vertikalen
                                          Abstand nach der Überschrift.\\
    \PValue{beforeskip} & \PName{Länge} & Der Betrag gibt den vertikalen
                                          Abstand vor der Überschrift an. Ist
                                          der Wert negativ, so wird also
                                          trotzdem ein positiver Abstand
                                          eingefügt. Negative Werte bedeuten
                                          in diesem Fall, dass der Absatz nach
                                          der Überschrift ohne horizontalen
                                          Einzug gesetzt werden soll.\\
    \PValue{font} & \PName{Schrifteinstellung}  & 
                                          Die Fonteinstellungen, die
                                          zusätzlich zum Element
                                          \FontElement{disposition} bei der
                                          Ausgabe der Überschrift verwendet
                                          werden sollen. Hier sind alle
                                          Einstellungen erlaubt, die auch über
                                          \Macro{setkomafont} und
                                          \Macro{addtokomafont} für das
                                          Element des Gliederungsbefehls
                                          erlaubt sind.\\
    \PValue{indent} & \PName{Länge}     & Einzug vom linken Rand vor der
                                          Ausgabe der Nummer und des Textes
                                          der Überschrift.\\
    
    \bottomrule
  \end{tabularx}
\end{table}

\begin{table}
  \caption[{Eigenschaften des Stils \PValue{chapter} bei der Konfiguration von
    Gliederungsbefehlen}]{Zusätzliche \PName{Schlüssel} und \PName{Werte} für
    die \PName{Eigenschaften} bei der Konfiguration von Gliederungsbefehlen des
    Stils \PValue{chapter}\Index{Gliederung>Stil>~\PValue{chapter}}}%
  \label{tab:maincls-experts.declarechapterstyle.keys}%
  \begin{tabularx}{\linewidth}{llX}
    \toprule
    \PName{Schlüssel} & \PName{Wert} & Bedeutung \\
    \midrule
    \PValue{afterskip} & \PName{Länge}  & Der Betrag gibt den vertikalen
                                          Abstand nach der Überschrift an.\\
    \PValue{beforeskip} & \PName{Länge} & Der Betrag gibt den vertikalen
                                          Abstand vor der Überschrift an. Ist
                                          der Wert negativ, so wird also
                                          trotzdem ein positiver Abstand
                                          eingefügt. Negative Werte bedeuten
                                          in diesem Fall, dass der Absatz nach
                                          der Überschrift ohne horizontalen
                                          Einzug gesetzt werden soll.\\
    \PValue{font} & \PName{Schrifteinstellung}  & 
                                          Die Fonteinstellungen, die
                                          zusätzlich zum Element
                                          \FontElement{disposition} bei der
                                          Ausgabe der Überschrift verwendet
                                          werden sollen. Hier sind alle
                                          Einstellungen erlaubt, die auch über
                                          \Macro{setkomafont} und
                                          \Macro{addtokomafont} für das
                                          Element des Gliederungsbefehls
                                          erlaubt sind.\\
    \PValue{innerskip} & \PName{Länge}  & Der vertikale Abstand zwischen
                                          Präfixzeile und Text der
                                          Überschrift, falls eine Präfixzeile
                                          verwendet wird.\\
    \PValue{pagestyle} & \PName{Seitenstil} &
                                          Der Name des Seitenstils, der für
                                          die Seite mit der Überschrift
                                          verwendet werden soll. Es findet
                                          keine Überprüfung statt, ob der
                                          angegebene \PName{Seitenstil} gültig
                                          ist. Fehlerhafte Angaben führen
                                          daher zu Fehlermeldungen bei
                                          Verwendung des Gliederungsbefehls.\\
    \PValue{prefixfont} & \PName{Schrifteinstellung}  & 
                                          Die Fonteinstellungen, die
                                          zusätzlich zum Element
                                          \FontElement{disposition} und dem
                                          Element des Gliederungsbefehls bei
                                          der Ausgabe einer Präfixzeile in der
                                          Überschrift verwendet werden
                                          sollen. Hier sind alle
                                          Einstellungen erlaubt, die auch über
                                          \Macro{setkomafont} und
                                          \Macro{addtokomafont} für das
                                          Element der Präfixzeile des
                                          Gliederungsbefehls erlaubt sind.\\    
    \bottomrule
  \end{tabularx}
\end{table}

\begin{table}
  \caption[{Eigenschaften des Stils \PValue{part} bei der Konfiguration von
    Gliederungsbefehlen}]{Zusätzliche \PName{Schlüssel} und \PName{Werte} für
    die \PName{Eigenschaften} bei der Konfiguration von Gliederungsbefehlen des
    Stils \PValue{part}\Index{Gliederung>Stil>~\PValue{part}}}%
  \label{tab:maincls-experts.declarepartstyle.keys}%
  \begin{tabularx}{\linewidth}{llX}
    \toprule
    \PName{Schlüssel} & \PName{Wert} & Bedeutung \\
    \midrule
    \PValue{afterskip} & \PName{Länge}  & Der Betrag gibt den vertikalen
                                          Abstand nach der Überschrift an.\\
    \PValue{beforeskip} & \PName{Länge} & Der Betrag gibt den vertikalen
                                          Abstand vor der Überschrift an. Ist
                                          der Wert negativ, so wird also
                                          trotzdem ein positiver Abstand
                                          eingefügt. Negative Werte bedeuten
                                          in diesem Fall, dass der Absatz nach
                                          der Überschrift ohne horizontalen
                                          Einzug gesetzt werden soll.\\
    \PValue{font} & \PName{Schrifteinstellung}  & 
                                          Die Fonteinstellungen, die
                                          zusätzlich zum Element
                                          \FontElement{disposition} bei der
                                          Ausgabe der Überschrift verwendet
                                          werden sollen. Hier sind alle
                                          Einstellungen erlaubt, die auch über
                                          \Macro{setkomafont} und
                                          \Macro{addtokomafont} für das
                                          Element des Gliederungsbefehls
                                          erlaubt sind.\\
    \PValue{innerskip} & \PName{Länge}  & %\OnlyAt{\Class{scrbook}\and
                                          %  \Class{scrreprt}}%
                                          Der vertikale Abstand zwischen
                                          Präfixzeile und Text der
                                          Überschrift bei
                                          \Class{scrbook} und
                                          \Class{scrreprt}.\\
    \PValue{pagestyle} & \PName{Seitenstil} &
                                          %\OnlyAt{\Class{scrbook}\and
                                          %  \Class{scrreprt}}%
                                          Der Name des Seitenstils, der für
                                          die Seite mit der Überschrift
                                          verwendet werden soll. Es findet
                                          keine Überprüfung statt, ob der
                                          angegebene \PName{Seitenstil} gültig
                                          ist. Fehlerhafte Angaben führen
                                          daher zu Fehlermeldungen bei
                                          Verwendung des
                                          Gliederungsbefehls. Diese
                                          Möglichkeit existiert nur bei
                                          \Class{scrbook} und
                                          \Class{scrreprt}. \\
    \PValue{prefixfont} & \PName{Schrifteinstellung}  & 
                                          Die Fonteinstellungen, die
                                          zusätzlich zum Element
                                          \FontElement{disposition} und dem
                                          Element des Gliederungsbefehls bei
                                          der Ausgabe einer Präfixzeile in der
                                          Überschrift verwendet werden
                                          sollen. Hier sind alle
                                          Einstellungen erlaubt, die auch über
                                          \Macro{setkomafont} und
                                          \Macro{addtokomafont} für das
                                          Element der Präfixzeile des
                                          Gliederungsbefehls erlaubt sind.\\
    \bottomrule
  \end{tabularx}
\end{table}

\Macro{DeclareNewSectionCommand} dient der Definition eines neuen
Gliederungsbefehls. Ist derselbe \PName{Name} von \TeX{} bereits anderweitig
belegt, so wird ein Fehler ausgegeben und es findet keine Umdefinierung
statt.

\Macro{ProvideSectionSommand} verhält sich ähnlich, gibt aber keine
Fehlermeldung aus.

\Macro{RedeclareSectionCommand} kann hingegen nur verwendet werden, um eine
existierende Anweisung zu einem Gliederungsbefehl mit den angegebenen
\PName{Eigenschaften} zu ändern. Dabei wird nicht überprüft, ob
\Macro{\PName{Name}} bereits zuvor ein Gliederungsbefehl war. Es muss nur ein
von \TeX{} bereits belegter \PName{Name} sein.

Bei \Macro{DeclareSectionCommand} findet keinerlei Überprüfung statt, ob
\PName{Name} von \TeX{} bereits anderweitig belegt ist. Stattdessen wird der
Gliederungsbefehl \Macro{\PName{Name}} unbedingt mit den angegebenen
\PName{Eigenschaften} definiert.

Zu jeder Gliederungsanweisung gehört außerdem ein Zähler mit demselben
\PName{Name}, der bei Bedarf von allen vier Befehlen mit \Macro{newcounter}
neu angelegt wird. Dasselbe gilt für die Ausgabe des Zählers,
\Macro{the\PName{Name}}, die Formatierung des Zählers,
\Macro{\PName{Name}format}, die Anweisung zur Erstellung eines Kolumnentitels,
\Macro{\PName{Name}mark}, die dabei verwendete Formatierung des Zählers,
\Macro{\PName{Name}markformat}, das Element \FontElement{\PName{Name}}, und
die Gliederungsebene \Macro{\PName{Name}numdepth}. Die Anweisung zur
Erstellung eines Kolumnentitels, \Macro{\PName{Name}mark} wird dabei
gegebenenfalls so vordefiniert, dass kein Kolumnentitel erzeugt wird. Die
Ausgabe des Zählers, \Macro{the\PName{Name}} wird als arabische Zahl
vordefiniert. Wird über den \PName{Schlüssel} \PValue{counterwithin} der
Zähler als von einem anderen Zähler abhängig definiert, so wird in der Ausgabe
dieser andere Zähler mit einem Punkt getrennt vorangestellt.

Neben\ChangedAt[2016/03]{v3.20}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} dem Gliederungsbefehl selbst wird auch ein Befehl für
einen Eintrag ins Inhaltsverzeichnis definiert. Dafür wird auf das Paket
\Package{tocbasic}\important{\Package{tocbasic}}\IndexPackage{tocbasic}
zurückgegriffen. Der Stil des Verzeichniseintrags wird über die Eigenschaft
\PValue{tocstyle} festgelegt. Wird hier mit \OptionValue{tocstyle}{} oder
\OptionValue{tocstyle}{\{\}} ein leerer \PName{Name} angegeben, so erfolgt
keine Umdefinierung des Befehls für den Verzeichniseintrag. Das ist
beispielsweise dann wichtig, wenn Sie ein zusätzliches Paket zur Modifikation
des Inhaltsverzeichnisses verwenden. Fehlt die Eigenschaft \PValue{tocstyle},
so wird bei der Umdefinierung der bisherige Stil erneut verwendet.

Unterschiedliche\ChangedAt[2016/03]{v3.20}{\Class{scrbook}\and
  \Class{scrreprt}\and \Class{scrartcl}} Stile für Verzeichniseinträge haben
unterschiedliche zusätzliche Eigenschaften. Diese können mit dem Präfix
\PValue{toc} versehen direkt mit angegeben werden. So kann beispielsweise die
Ebene des Verzeichniseintrags, die bei allen von den \KOMAScript-Klassen und
\Package{tocbasic} definierten Stilen als Eigenschaft \PValue{level} bekannt
ist, mit \PValue{toclevel} gesetzt werden, der Einzug des Eintrags,
\PValue{indent}, über \PValue{tocindent} und die für die Nummer reservierte
Breite, \PValue{numwidth}, mit \PValue{tocnumwidth}. Für weitere Eigenschaften
der Verzeichniseinträge siehe \autoref{sec:tocbasic.tocstyle} ab Seite
\autopageref{sec:tocbasic.tocstyle}.

\begin{Example}
  Aus unerfindlichen Gründen sollen die Überschriften von \Macro{paragraph}
  nicht mehr als Spitzmarken, sondern als Überschriften ähnlich
  \Macro{subsubsection} umdefiniert werden. Dabei soll über der Überschrift
  ein kleiner Abstand von 10\,pt und unter der Überschrift kein zusätzlicher
  Abstand eingefügt werden. Das wäre bereits mit
\begin{lstcode}
  \RedeclareSectionCommand[%
    beforeskip=-10pt,%
    afterskip=1sp%
  ]{paragraph}
\end{lstcode}
  möglich. Durch den negativen Wert bei \PValue{beforeskip} wird der vertikale
  Abstand über der Überschrift erzeugt und gleichzeitig der Einzug des ersten
  Abschnitts nach der Überschrift abgeschaltet. Obwohl eigentlich nach der
  Überschrift kein vertikaler Abstand gewünscht wird, wurde als Wert hier
  1\,sp angegeben. Der Grund ist einfach: Einen Wert von 0\,pt betrachtet
  \LaTeX{} an dieser Stelle nicht als positiven Wert und erzeugt damit eine
  Überschrift in der Form einer Spitzmarke. Der kleinste positive Wert ist
  1\,sp.

  In der Regel ist es für den vertikalen Ausgleich (siehe \Macro{flushbottom},
  \autoref{sec:maincls.typearea}, \autopageref{desc:maincls.cmd.flushbottom})
  besser, wenn man die Abstände mit etwas Spielraum, dem sogenannten Leim,
  versieht:
\begin{lstcode}
  \RedeclareSectionCommand[%
    beforeskip=-10pt plus -2pt minus -1pt,%
    afterskip=1sp plus -1sp minus 1sp%
  ]{paragraph}
\end{lstcode}
  Dabei ist zu beachten, dass natürlich auch der Leim bei der Anwendung als
  vertikaler Abstand das Vorzeichen wechselt, also bei \PValue{beforeskip} im
  Beispiel negativ angegeben wird. Gleichzeitig wurde die Gelegenheit genutzt,
  über den Leim bei \PValue{afterskip} dafür zu sorgen, dass der Abstand dort
  gegebenenfalls tatsächlich bis auf 0 schrumpft.
\end{Example}

Dass im Beispiel tatsächlich nur die Schlüssel \PValue{beforeskip} und
\PValue{afterskip} verwendet werden mussten, liegt daran, dass seit
\KOMAScript{} v3.15 \Macro{paragraph} intern bereits mit
\Macro{DeclareSectionCommand} definiert wird und daher die übrigen
Einstellungen unverändert übernommen werden können. Die Originaldefinition von
\Macro{paragraph} entspricht bei \Class{scrartcl}:
\begin{lstcode}[belowskip=\dp\strutbox]
  \DeclareSectionCommand[%
    level=4,
    indent=0pt,
    beforeskip=3.25ex plus 1ex minus .2ex,
    afterskip=-1em,
    font={},
    tocindent=7em,
    tocnumwidth=4.1em,
    counterwithin=subsubsection
  ]{paragraph}
\end{lstcode}
Bei \Class{scrreprt} und \Class{scrbook} werden teilweise abweichende Werte
verwendet.

Für \Macro{chapter} sind einige Einstellungen für die Überschriften von Option
\Option{headings} (siehe \autoref{sec:maincls.structure},
\autopageref{desc:maincls.option.headings}) abhängig. Diese abhängigen
Einstellungen sind in \autoref{tab:maincls.chapter.skips} zu finden. Eine
Übersicht über alle Voreinstellungen bietet
\autoref{tab:maincls.section.defaults}. Es ist zu beachten, dass dabei
\PValue{1ex} und \Length{baselineskip} von der voreingestellten Größe der
Überschrift beziehungsweise des Inhaltsverzeichniseintrags abhängig
sind. Weitere Voreinstellungen\ChangedAt[2016/03]{v3.20}{\Class{scrbook}\and
  \Class{scrreprt}\and \Class{scrartcl}} für die Stile der Verzeichniseinträge
sind \autoref{sec:tocbasic.tocstyle}\important{\Package{tocbasic}} ab
\autopageref{sec:tocbasic.tocstyle} zu entnehmen.

\begin{table}
  \centering
  \caption{Voreinstellungen für die Kapitelüberschriften von \Class{scrbook}
    und \Class{scrreprt} in Abhängigkeit von Option \Option{headings}}
  \label{tab:maincls.chapter.skips}
  \begin{tabular}{ll}
    \multicolumn{2}{@{}l}{\bfseries Mit \OptionValue{headings}{big}:}\\
    \toprule
    Einstellung & voreingestellter Wert \\
    \midrule
    \PValue{afterskip}
      & \PValue{1.725\Length{baselineskip} plus .115\Length{baselineskip}
        minus .192\Length{baselineskip}} \\
    \PValue{beforeskip} 
      & \PValue{3.3\Length{baselineskip}+\Length{parskip}} \\
    \PValue{font} & \Macro{huge} \\
    \bottomrule\\
    \multicolumn{2}{@{}l}{\bfseries Mit \OptionValue{headings}{normal}:}\\
    \toprule
    Einstellung & voreingestellter Wert \\
    \midrule
    \PValue{afterskip}
      & \PValue{1.5\Length{baselineskip} plus .1\Length{baselineskip}
        minus .167\Length{baselineskip}} \\
    \PValue{beforeskip} 
      & \PValue{3\Length{baselineskip}+\Length{parskip}} \\
    \PValue{font} & \Macro{LARGE} \\
    \bottomrule\\
    \multicolumn{2}{@{}l}{\bfseries Mit \OptionValue{headings}{small}:}\\
    \toprule
    Einstellung & voreingestellter Wert \\
    \midrule
    \PValue{afterskip}
      & \PValue{1.35\Length{baselineskip} plus .09\Length{baselineskip}
        minus .15\Length{baselineskip}} \\
    \PValue{beforeskip} 
      & \PValue{2.8\Length{baselineskip}+\Length{parskip}} \\
    \PValue{font} & \Macro{Large} \\
    \bottomrule
  \end{tabular}
\end{table}

%begin{table}
% \centering
  \begin{longtable}{@{}p{\columnwidth}@{}}
    \caption{Voreinstellungen für die Überschriften von \Class{scrbook} und
      \Class{scrreprt}}%
    \label{tab:maincls.section.defaults}\\
    \endfirsthead
    \caption[]{Voreinstellungen für die Überschriften von \Class{scrbook} und
      \Class{scrreprt} \emph{(Fortsetzung)}}\\
    \addlinespace[-\normalbaselineskip]
    \endhead
    \raggedleft\dots\\
    \endfoot
    \endlastfoot
    \Macro{part}: \\*
    \begin{tabularx}{\linewidth}{ll}
    \toprule
    Einstellung & voreingestellter Wert \\
    \midrule
    \PValue{afterskip}   & \PValue{0pt plus 1fil} \\
    \PValue{beforeskip}  & \PValue{0pt plus 1fil + \Length{baselineskip}} \\
    \PValue{font}        & siehe Element \FontElement{part}, 
                           \autoref{tab:maincls.structureElementsFont}, 
                           \autopageref{tab:maincls.structureElementsFont} \\
    \PValue{innerskip}   & \PValue{20pt} \\
    \PValue{level}       & -1 \\
    \PValue{prefixfont}  & siehe Element \FontElement{partnumber},
                           \autoref{tab:maincls.structureElementsFont}, 
                           \autopageref{tab:maincls.structureElementsFont} \\
    \PValue{tocindent}   & \PValue{0pt} \\
    \PValue{toclevel}    & -1 \\
    \PValue{tocnumwidth} & \PValue{2em} \\
    \PValue{tocstyle}    & \PValue{part} \\
    \bottomrule
    \end{tabularx} \\
    \addlinespace[\normalbaselineskip]
    \Macro{chapter}: \\*
    \begin{tabularx}{\linewidth}{ll}
    \toprule
    Einstellung & voreingestellter Wert \\
    \midrule
    \PValue{afterskip}   & siehe \autoref{tab:maincls.chapter.skips} \\
    \PValue{beforeskip}  & siehe \autoref{tab:maincls.chapter.skips} \\
    \PValue{font}        & siehe Element \FontElement{chapter},
                           \autoref{tab:maincls.structureElementsFont}, 
                           \autopageref{tab:maincls.structureElementsFont} \\
    \PValue{innerskip}   & \PValue{0pt} \\
    \PValue{level}       & 0 \\
    \PValue{prefixfont}  & siehe Element \FontElement{chapterprefix},
                           \autoref{tab:maincls.structureElementsFont}, 
                           \autopageref{tab:maincls.structureElementsFont} \\
    \PValue{tocindent}   & \PValue{0pt} \\
    \PValue{toclevel}    & 0 \\
    \PValue{tocnumwidth} & \PValue{1.5em} \\
    \PValue{tocstyle}    & \PValue{chapter} \\
    \bottomrule
    \end{tabularx} \\
    \addlinespace[\normalbaselineskip]
    \Macro{section}: \\*
    \begin{tabularx}{\linewidth}{ll}
    \toprule
    Einstellung & voreingestellter Wert \\
    \midrule
    \PValue{afterskip}   & \PValue{2.3ex plus .2ex} \\
    \PValue{beforeskip}  & \PValue{-3.5ex plus -1ex minus -.2ex} \\
    \PValue{font}        & siehe Element \FontElement{section},
                           \autoref{tab:maincls.structureElementsFont}, 
                           \autopageref{tab:maincls.structureElementsFont} \\
    \PValue{indent}      & \PValue{0pt} \\
    \PValue{level}       & 1 \\
    \PValue{tocindent}   & \PValue{1.5em}\\
    \PValue{toclevel}    & 1 \\
    \PValue{tocnumwidth} & \PValue{2.3em}\\
    \PValue{tocstyle}    & \PValue{section} \\
    \bottomrule
    \end{tabularx} \\
    \addlinespace[\normalbaselineskip]
    \Macro{subsection}: \\*
    \begin{tabularx}{\linewidth}{ll}
    \toprule
    Einstellung & voreingestellter Wert \\
    \midrule\nopagebreak
    \PValue{afterskip}   & \PValue{1.5ex plus .2ex} \\
    \PValue{beforeskip}  & \PValue{-3.25ex plus -1ex minus -.2ex} \\
    \PValue{font}        & siehe Element \FontElement{subsection},
                           \autoref{tab:maincls.structureElementsFont}, 
                           \autopageref{tab:maincls.structureElementsFont} \\
    \PValue{indent}      & \PValue{0pt} \\
    \PValue{level}       & 2 \\
    \PValue{tocindent}   & \PValue{3.8em}\\
    \PValue{toclevel}    & 2 \\
    \PValue{tocnumwidth} & \PValue{3.2em}\\
    \PValue{tocstyle}    & \PValue{section} \\
    \bottomrule
    \end{tabularx} \\
    \addlinespace[\normalbaselineskip]
    \Macro{subsubsection}: \\*
    \begin{tabularx}{\linewidth}{ll}
    \toprule
    Einstellung & voreingestellter Wert \\
    \midrule\nopagebreak
    \PValue{afterskip}   & \PValue{1.5ex plus .2ex} \\
    \PValue{beforeskip}  & \PValue{-3.25ex plus -1ex minus -.2ex} \\
    \PValue{font}        & siehe Element \FontElement{subsubsection},
                           \autoref{tab:maincls.structureElementsFont}, 
                           \autopageref{tab:maincls.structureElementsFont} \\
    \PValue{indent}      & \PValue{0pt} \\
    \PValue{level}       & 3 \\
    \PValue{tocindent}   & \PValue{7.0em}\\
    \PValue{toclevel}    & 3 \\
    \PValue{tocnumwidth} & \PValue{4.1em}\\
    \PValue{tocstyle}    & \PValue{section} \\
    \bottomrule
    \end{tabularx} \\
    \addlinespace[\normalbaselineskip]
    \Macro{paragraph}: \\*
    \begin{tabularx}{\linewidth}{ll}
    \toprule
    Einstellung & voreingestellter Wert \\
    \midrule\nopagebreak
    \PValue{afterskip}   & \PValue{-1em} \\
    \PValue{beforeskip}  & \PValue{3.25ex plus 1ex minus .2ex} \\
    \PValue{font}        & siehe Element \FontElement{paragraph},
                           \autoref{tab:maincls.structureElementsFont}, 
                           \autopageref{tab:maincls.structureElementsFont} \\
    \PValue{indent}      & \PValue{0pt} \\
    \PValue{level}       & 4 \\
    \PValue{tocindent}   & \PValue{10em}\\
    \PValue{toclevel}    & 4 \\
    \PValue{tocnumwidth} & \PValue{5em}\\
    \PValue{tocstyle}    & \PValue{section} \\
    \bottomrule
    \end{tabularx} \\
    \addlinespace[\normalbaselineskip]
    \Macro{subparagraph}:  \\*
    \begin{tabularx}{\linewidth}{ll}
    \toprule
    Einstellung & voreingestellter Wert \\
    \midrule\nopagebreak
    \PValue{afterskip}   & \PValue{-1em} \\
    \PValue{beforeskip}  & \PValue{3.25ex plus 1ex minus .2ex} \\
    \PValue{font}        & siehe Element \FontElement{subparagraph},
                           \autoref{tab:maincls.structureElementsFont}, 
                           \autopageref{tab:maincls.structureElementsFont} \\
    \PValue{indent}      & \Macro{scr@parindent} \\
    \PValue{level}       & 5 \\
    \PValue{tocindent}   & \PValue{12em}\\
    \PValue{toclevel}    & 5 \\
    \PValue{tocnumwidth} & \PValue{6em}\\
    \PValue{tocstyle}    & \PValue{section} \\
    \bottomrule
    \end{tabularx}
  \end{longtable}
%end{table}
%
\EndIndex{Cmd}{ProvideSectionCommand}%
\EndIndex{Cmd}{RedeclareSectionCommand}%
\EndIndex{Cmd}{DeclareNewSectionCommand}%
\EndIndex{Cmd}{DeclareSectionCommand}%


\begin{Declaration}
  \Macro{DeclareSectionCommands}\OParameter{Einstellungen}%
                                \Parameter{Namensliste}\\
  \Macro{DeclareNewSectionCommands}\OParameter{Einstellungen}%
                                   \Parameter{Namensliste}\\
  \Macro{RedeclareSectionCommands}\OParameter{Einstellungen}%
                                  \Parameter{Namensliste}\\
  \Macro{ProvideSectionCommands}\OParameter{Einstellungen}%
                                \Parameter{Namensliste}
\end{Declaration}
\BeginIndex{Cmd}{DeclareSectionCommands}%
\BeginIndex{Cmd}{DeclareNewSectionCommands}%
\BeginIndex{Cmd}{RedeclareSectionCommands}%
\BeginIndex{Cmd}{ProvideSectionCommands}%
Mit\ChangedAt{v3.15}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} diesen Anweisungen können gleich eine ganze Reihe von
Gliederungsbefehlen definiert oder geändert werden. Dabei ist
\PName{Namensliste} eine durch Komma separierte Liste von Namen der
Gliederungsbefehle. 

Diese Anweisungen unterscheiden sich in zwei weiteren Punkten von den zuvor
erklärten Anweisungen zur Definition oder Änderung eines einzelnen
Gliederungsbefehls. Zum einen wird im Fehlerfall, also wenn eine Anweisung bei
\Macro{DeclareNewSectionCommands} bereits zuvor existierte oder bei
\Macro{RedeclareSectionCommands} noch nicht existierte, die Definition dennoch
vorgenommen. Ein entsprechender Fehler wird natürlich trotzdem gemeldet.

Zum anderen gibt es eine weitere Einstellung,
\PValue{increaselevel}=\PValue{Ganzzahl}\important{\PValue{increaselevel}}.
Damit ändert sich die Bedeutung von \PValue{level} und \PValue{toclevel}
(siehe \autoref{tab:maincls-experts.declaresection.keys}) dahingehend, dass
deren Werte lediglich \PName{Einstellungen} des ersten Gliederungsbefehls aus
der \PName{Namensliste} sind. Für alle weiteren Gliederungsbefehle werden die
Werte von \PValue{level} und \PValue{toclevel} um den Wert von
\PValue{increaselevel} erhöht. Wurde die Einstellung \PValue{increaselevel}
ohne Wertzuweisung verwendet, so wird der Wert 1 angenommen.
%
\EndIndex{Cmd}{ProvideSectionCommands}%
\EndIndex{Cmd}{RedeclareSectionCommands}%
\EndIndex{Cmd}{DeclareNewSectionCommands}%
\EndIndex{Cmd}{DeclareSectionCommands}%


\begin{Declaration}
  \Macro{chapterheadstartvskip}\\
  \Macro{chapterheadmidvskip}\\
  \Macro{chapterheadendvskip}\\
  \Macro{partheadstartvskip}\\
  \Macro{partheadmidvskip}\\
  \Macro{partheadendvskip}\\
  \Macro{partheademptypage}
\end{Declaration}
\BeginIndex{Cmd}{chapterheadstartvskip}%
\BeginIndex{Cmd}{chapterheadsmidvskip}%
\BeginIndex{Cmd}{chapterheadendvskip}%
\BeginIndex{Cmd}{partheadstartvskip}%
\BeginIndex{Cmd}{partheadmidvskip}%
\BeginIndex{Cmd}{partheadendvskip}%
\BeginIndex{Cmd}{partheademptypage}%
Diese\important[i]{\Macro{chapter}\\
  \Macro{part}\\
  \Macro{addchap}\\
  \Macro{addpart}} Anweisungen werden innerhalb der Definition der
Überschriften \Macro{chapter}\IndexCmd{chapter}, \Macro{part},
\Macro{addchap}, \Macro{addpart} und deren Sternvarianten verwendet. Dabei ist
\Macro{chapterheadstartvskip} eine Anweisung, die dafür vorgesehen ist, vor
der Kapitelüberschrift einen vertikalen Abstand einzufügen. Entsprechend ist
\Macro{chapterheadendvskip} eine Anweisung, die dafür vorgesehen ist, nach der
Kapitelüberschrift einen vertikalen Abstand
einzufügen. Bei\ChangedAt{v3.15}{\Class{scrbook}\and \Class{scrreprt}}
Kapitelüberschriften mit eigener Nummernzeile (siehe Option
\Option{chapterprefix} in \autoref{sec:maincls.structure},
\autopageref{desc:maincls.option.chapterprefix}) wird zwischen der
Nummernzeile und der eigentlichen Überschrift außerdem
\Macro{chapterheadmidvskip} ausgeführt.

Für das Einfügen der vertikalen Abstände über und unter Teile-Überschriften
sind die Anweisungen \Macro{partheadstartvskip} und \Macro{partheadendvskip}
vorgesehen. Dabei wird ein Seitenumbruch als Teil des vertikalen Abstandes
interpretiert und ist bei \Class{scrbook}\OnlyAt{\Class{scrbook}\and
  \Class{scrreprt}} und \Class{scrreprt} in der Voreinstellung von
\Macro{partheadendvskip} enthalten. Die Anweisung \Macro{partheadmidvskip} ist
für den Abstand zwischen der Teile-Nummer und dem Text der Teile-Überschrift
vorgesehen. Die Anweisung
\Macro{partheademptypage}\ChangedAt{v3.02}{\Class{scrbook}\and
  \Class{scrreprt}} wird bei \Class{scrbook} und \Class{scrreprt}
gegebenenfalls für die leere Seite nach der Überschrift verwendet.

Die Voreinstellungen für diese sieben Anweisungen sind seit
\KOMAScript~3.15\ChangedAt{v3.15}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} von der Einstellung von Option \Option{headings} (siehe
\autoref{sec:maincls.structure}, \autopageref{desc:maincls.option.headings})
unabhängig. Die Original-Definitionen für die Kapitelüberschriften ab
\KOMAScript~3.17\ChangedAt{v3.17}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} entsprechen:\IndexLength{@tempskipa}
\begin{lstcode}
  \newcommand*{\chapterheadstartvskip}{\vspace{\@tempskipa}}
  \newcommand*{\chapterheadmidvskip}{\par\nobreak\vskip\@tempskipa}
  \newcommand*{\chapterheadendvskip}{\vskip\@tempskipa}
\end{lstcode}
Diese werden auch bei jeder Verwendung von Option
\OptionValue{headings}{big}\IndexOption{headings},
\OptionValue{headings}{normal} oder \OptionValue{headings}{small} reaktiviert.

Die Anweisung \Macro{chapter} setzt die interne Länge \Length{@tempskipa} vor
Aufruf von \Macro{chapterheadstartvskip} automatisch auf den Wert, der sich
aus der
\Macro{DeclareSectionCommand}-Einstellung\IndexCmd{DeclareSectionCommand}
\PValue{beforeskip} ergibt. Entsprechendes geschieht vor dem Aufruf von
\Macro{chapterheadendvskip} mit dem Wert, der sich aus der
\Macro{DeclareSectionCommand}-Einstellung \PValue{afterskip} ergibt, und vor
dem Aufruf von \Macro{chapterheadmidvskip} mit dem Wert, der sich aus
\Macro{DeclareSectionCommand}-Einstellung \PValue{innerskip} ergibt. Werden
\Macro{chapterheadstartvskip}, \Macro{chapterheadmidvskip} oder
\Macro{chapterheadendvskip} umdefiniert und sollen die Abstände weiterhin
beispielsweise mit \Macro{RedeclareSectionCommand} konfigurierbar sein, so
sollte man in der neuen Definition ebenfalls \Length{@tempskipa} verwenden.

Da die Voreinstellungen für die Abstände von \Macro{part} nicht von Option
\Option{headings} abhängen, werden auch die zugehörigen Anweisungen von dieser
Option nicht neu definiert. Ihre\ChangedAt{v3.17}{\Class{scrbook}\and
  \Class{scrreprt}\and \Class{scrartcl}} Original-Definitionen entsprechen bei
\Class{scrbook} und \Class{scrreprt}:
\begin{lstcode}
  \newcommand*{\partheadstartvskip}{%
    \null\vskip-\baselineskip\vskip\@tempskipa
  }
  \newcommand*{\partheadmidvskip}{%
    \par\nobreak
    \vskip\@tempskipa
  }
  \newcommand*{\partheadendvskip}{%
    \vskip\@tempskipa\newpage
  }
\end{lstcode}
und bei \Class{scrartcl}:
\begin{lstcode}
  \newcommand*{\partheadstartvskip}{%
    \addvspace{\@tempskipa}%
  }
  \newcommand*{\partheadmidvskip}{%
    \par\nobreak
  }
  \newcommand*{\partheadendvskip}{%
    \vskip\@tempskipa
  }
\end{lstcode}
Auch hier wird \Length{@tempskipa}\IndexLength{@tempskipa} vor der Verwendung
der Befehle innerhalb von \Macro{part} entsprechend der Einstellungen von
\Macro{DeclareSectionCommand}\IndexCmd{DeclareSectionCommand} gesetzt.

Da\ChangedAt{v3.17}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} die Abstände über, innerhalb und unter den Überschriften
wesentlich einfacher mit \Macro{RedeclareSectionCommand} eingestellt werden
können, wird nicht empfohlen zu diesem Zweck stattdessen die hier
beschriebenen Anweisungen umzudefinieren. Sie sollten für tiefgreifendere
Änderungen reserviert bleiben, die nicht über \Macro{RedeclareSectionCommand}
zu erreichen sind.  Auf\textnote{Beispiel!} \cite{homepage} findet sich dazu
es ein Beispiel, bei dem durch Umdefinierung von \Macro{chapterheadstartvskip}
und \Macro{chapterheadendvskip} Linien über und unter der Kapitelüberschrift
gesetzt werden.%
%
\EndIndex{Cmd}{partheademptypage}%
\EndIndex{Cmd}{partheadendvskip}%
\EndIndex{Cmd}{partheadmidvskip}%
\EndIndex{Cmd}{partheadstartvskip}%
\EndIndex{Cmd}{chapterheadendvskip}%
\EndIndex{Cmd}{chapterheadstartvskip}%


\begin{Declaration}
  \Macro{chapterlineswithprefixformat}%
    \Parameter{Ebene}\Parameter{Nummer}\Parameter{Text}\\
  \Macro{chapterlinesformat}%
    \Parameter{Ebene}\Parameter{Nummer}\Parameter{Text}
\end{Declaration}
\BeginIndex{Cmd}{chapterlineswithprefixformat}%
\BeginIndex{Cmd}{chapterlinesformat}%
Diese\ChangedAt{v3.19}{\Class{scrbook}\and \Class{scrreprt}} beiden
Anweisungen werden von Überschriften des Stils
\PValue{chapter}\textnote{Gliederungsstil
  \PValue{chapter}}\Index{Gliederung>Stil>~\PValue{chapter}} in Abhängigkeit
von Option \Option{chapterprefix}\IndexOption{chapterprefix}%
\textnote{\Option{chapterprefix}} (siehe \autoref{sec:maincls.structure},
\autopageref{desc:maincls.option.chapterprefix}) verwendet. Dabei gibt
\Macro{chapterlineswithprefixformat} die Ausgabe bei aktivierter Option vor,
während \Macro{chapterlinesformat} die Ausgabe bei deaktivierter Option
bestimmt.

Die beiden Argumente \PName{Nummer} und \PName{Text} sind dabei
einschließlich Einstellung der Fonts für sich bereits fertig
formatiert. Letztlich regeln die Anweisungen also die Anordnung der beiden
Teile der Überschrift. Bei nicht nummerierten Überschriften ist \PName{Nummer}
ein komplett leeres Argument, enthält also auch keine
Formatierungsanweisungen.

Vordefiniert sind die beiden Anweisungen mit:
\begin{lstcode}[belowskip=\dp\strutbox plus 1pt]
  \newcommand{\chapterlinesformat}[3]{%
    \@hangfrom{#2}{#3}%
  }
  \newcommand{\chapterlineswithprefixformat}[3]{%
    #2#3%
  }
\end{lstcode}
bisher eher spartanisch.

\begin{Example}
  Sie wollen Überschriften im Kapitelstil gelb hinterlegen. Für
  Überschriften ohne Präfixzeile definieren Sie daher in der Präambel des
  Dokument:
\begin{lstcode}
  \makeatletter
  \renewcommand{\chapterlinesformat}[3]{%
    \colorbox{yellow}{%
      \parbox{\dimexpr\linewidth-2\fboxrule-2\fboxsep}{%
        \@hangfrom{#2}#3%
      }%
    }%
  }
  \makeatother
\end{lstcode}
  und für Überschriften mit Präfixzeile:
\begin{lstcode}
  \renewcommand{\chapterlineswithprefixformat}[3]{%
    \colorbox{yellow}{%
      \parbox{\dimexpr\linewidth-2\fboxrule-2\fboxsep}{%
        #2#3%
      }%
    }%
  }
\end{lstcode}
  Allerdings fällt Ihnen nach einiger Zeit auf, dass mit dieser Umdefinierung
  die Überschriften wieder im Blocksatz gesetzt werden. Das liegt daran, dass
  \Macro{parbox} sein Argument so setzt. Um dies zu korrigieren, fügen Sie die
  Anweisung \Macro{raggedchapter} (siehe \autoref{sec:maincls.structure},
  \autopageref{desc:maincls.cmd.raggedchapter}), die automatisch bereits vor
  \Macro{chapterlinesformat} und \Macro{chapterlineswithprefixformat}
  aufgerufen wird, in die Definitionen ein:
\begin{lstcode}
  \makeatletter
  \renewcommand{\chapterlinesformat}[3]{%
    \colorbox{yellow}{%
      \parbox{\dimexpr\linewidth-2\fboxrule-2\fboxsep}{%
        \raggedchapter
        \@hangfrom{#2}#3%
      }%
    }%
  }
  \makeatother
  \renewcommand{\chapterlineswithprefixformat}[3]{%
    \colorbox{yellow}{%
      \parbox{\dimexpr\linewidth-2\fboxrule-2\fboxsep}{%
        \raggedchapter
        #2#3%
      }%
    }%
  }
\end{lstcode}
  Es sei daran erinnert, dass \Macro{makeatletter} und \Macro{makeatother} nur
  in der Dokumentpräambel zu verwenden sind. In einer eigenen Wrapper-Klasse
  oder einem Paket haben sie zu entfallen. Sie werden auch nur wegen
  \Macro{@hangfrom} in der Definition von \Macro{chapterlinesformat} benötigt.
\end{Example}

Wie im Beispiel gezeigt, ist der Anwender bei der Umdefinierung der
Anweisungen für einige Dinge selbst verantwortlich. Dazu gehört neben dem
Erhalt der voreingestellten Ausrichtung auch, dass innerhalb der Überschrift
kein Seitenumbruch beispielsweise an zusätzlich eingefügten Absätzen oder
Abständen erfolgen kann. Das gezeigte Beispiel ist diesbezüglich
unproblematisch. Nicht nur, dass die beiden Boxen ohnehin keinen Seitenumbruch
erlauben. \KOMAScript{} verändert außerdem \Macro{interlinepenalty} als Teil
von \PName{Text} so, dass darin kein Seitenumbruch stattfinden
darf. Gleichzeitig endet \PName{Text} immer mit einem internen Absatz,
\Macro{@par}.

Die Anweisung \Macro{raggedchapter} ist übrigens nicht Bestandteil von
\PName{Text}, weil anderenfalls beispielsweise die Verwendung von
\Macro{MakeUppercase} innerhalb der Umdefinierung von
\Macro{chapterlinesformat} oder \Macro{chapterlineswithprefixformat} erheblich
erschwert wäre. Dennoch sei darauf hingewiesen, dass typografischen Regeln
zufolge Versalsatz mit gängigen Fonts immer der Sperrung und des Ausgleichs
bedarf. Die \LaTeX-Anweisung \Macro{MakeUppercase} leistet dies jedoch nicht.

Das erste Argument, \PName{Ebene}, wird von den Anweisungen in der
Voreinstellung nicht verwendet und ist auch im Beispiel nicht
erforderlich. Erst, wenn der Anwender mehrere Anweisungen im Stil
\PValue{chapter} definiert und man innerhalb der Definition nach den
Anweisungen unterscheiden will, kann dies über \PName{Ebene} erfolgen. Dabei
ist \PName{Ebene} der vom Namen der Anweisung abgeleitete Name der
Gliederungsebene. Bei \Macro{chapter}, \Macro{chapter*}, \Macro{addchap} und
\Macro{addchap*} ist \PName{Ebene} daher einheitlich \PValue{chapter}.%
\EndIndex{Cmd}{chapterlinesformat}%
\EndIndex{Cmd}{chapterlineswithprefixformat}%


\begin{Declaration}
  \Macro{sectionlinesformat}%
    \Parameter{Ebene}\Parameter{Einzug}\Parameter{Nummer}\Parameter{Text}\\
  \Macro{sectioncatchphraseformat}%
    \Parameter{Ebene}\Parameter{Einzug}\Parameter{Nummer}\Parameter{Text}
\end{Declaration}
\BeginIndex{Cmd}{sectionlinesformat}%
\BeginIndex{Cmd}{sectioncatchphraseformat}%
Diese\ChangedAt{v3.19}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} beiden Anweisungen werden von Überschriften des Stils
\PValue{section}\textnote{Gliederungsstil
  \PValue{section}}\Index{Gliederung>Stil>~\PValue{section}} in Abhängigkeit
davon verwendet, ob die jeweilige Überschrift eine Spitzmarke erzeugt oder
eine frei stehende Überschrift. Frei stehende Überschriften werden dabei per
\Macro{sectionlinesformat} ausgegeben, während
\Macro{sectioncatchphraseformat} für Spitzmarken zuständig ist.

In beiden Fällen gibt \PName{Einzug} den Wert eines horizontalen Einzugs
der Überschrift gegenüber dem Textbereich an. Durch Angabe eines negativen
Wertes soll es auch möglich sein, die Überschrift in den linken Rand zu
rücken.

Die beiden Argumente \PName{Nummer} und \PName{Text} sind einschließlich
Einstellung der Fonts für sich bereits fertig formatiert. Letztlich regeln die
Anweisungen also die Anordnung der beiden Teile der Überschrift. Bei nicht
nummerierten Überschriften ist \PName{Nummer} ein komplett leeres Argument,
enthält also auch keine Formatierungsanweisungen.

Vordefiniert sind die beiden Anweisungen als:
\begin{lstcode}[belowskip=\dp\strutbox plus 1pt]
\newcommand{\sectionlinesformat}[4]{%
  \@hangfrom{\hskip #2#3}{#4}%
}
\newcommand{\sectioncatchphraseformat}[4]{%
  \hskip #2#3#4%
}
\end{lstcode}

Bei Umdefinierung einer der beiden Anweisungen ist wiederum der Anwender
selbst dafür verantwortlich Seitenumbrüche innerhalb der Ausgabe zu
verhindern. \KOMAScript{} selbst setzt lediglich \Macro{interlinepenalty}
entsprechend.

\begin{Example}
  Wie schon im Beispiel der Kapitelüberschriften sollen nun die frei stehenden
  Überschriften der Ebenen \PValue{section} mit einer Farbe hinterlegt
  werden. Die frei stehenden Überschriften tieferer Ebenen sollen nicht
  verändert werden:
\begin{lstcode}
  \makeatletter
  \renewcommand{\sectionlinesformat}[4]{%
    \@tempswafalse
    \ifstr{#1}{section}{%
      \hspace*{#2}%
      \colorbox{yellow}{%
        \parbox{\dimexpr\linewidth-2\fboxrule-2\fboxsep-#2}{%
          \raggedsection
          \@hangfrom{#3}{#4}%
        }%
      }%
    }{%
      \@hangfrom{\hskip #2#3}{#4}%
    }%
  }
  \makeatother
\end{lstcode}
  Mit dem gezeigten Code wird im Falle eines Einzugs der Überschrift der
  Bereich des Einzugs nicht mit gefärbt. Wird hingegen die Überschrift in den
  linken Rand gestellt, so wird dieser Bereich des Randes ebenfalls farbig
  hinterlegt. Durch Verschiebung der \Macro{hspace*}-Anweisung in die
  \Macro{colorbox} kann dieses Verhalten verändert werden.

  Erneut sei daran erinnert, dass \Macro{makeatletter} und \Macro{makeatother}
  nur in der Dokumentpräambel zu verwenden sind. In einer eigenen
  Wrapper-Klasse oder einem Paket haben sie zu entfallen. Sie werden auch nur
  wegen \Macro{@hangfrom} in der Definition von \Macro{sectionlinesformat}
  benötigt.
\end{Example}

Das erste Argument, \PName{Ebene}, wird von den Anweisungen in der
Voreinstellung nicht verwendet. Wie das Beispiel zeigt, kann es aber sehr gut
dazu verwendet werden, nach unterschiedlichen Gliederungsebenen im gemeinsamen
Stil \PValue{section} zu unterscheiden.%
\EndIndex{Cmd}{sectioncatchphraseformat}%
\EndIndex{Cmd}{sectionlinesformat}%


\begin{Declaration}
  \Macro{SecDef}\Parameter{Sternanweisung}\Parameter{Normalanweisung}\\
  \Macro{scr@startsection}\Parameter{Name}\Parameter{Ebene}%
  \Parameter{Einzug}\Parameter{Abstand davor}\Parameter{Abstand danach}\\
  \hphantom{\XMacro{scr@startsection}}\Parameter{Stilanweisungen}%
  \OParameter{Kurzform}\Parameter{Überschrift}\\
  \Macro{scr@startsection}\Parameter{Name}\Parameter{Ebene}%
  \Parameter{Einzug}\Parameter{Abstand davor}\Parameter{Abstand danach}\\
  \hphantom{\XMacro{scr@startsection}}\Parameter{Stilanweisungen}%
  \texttt{*}\Parameter{Überschrift}\\
  \Macro{At@startsection}\Parameter{Code}\\
  \Macro{Before@ssect}\Parameter{Code}\\
  \Macro{Before@sect}\Parameter{Code}
\end{Declaration}
\BeginIndex{Cmd}{At@startsection}%
\BeginIndex{Cmd}{Before@ssect}%
\BeginIndex{Cmd}{Before@sect}%
\BeginIndex{Cmd}{scr@startsection}%
Wie\ChangedAt[2014/09]{v3.15}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} bereits in \autoref{sec:maincls.structure} bei der
Beschreibung zu den Gliederungsbefehlen ab
\autopageref{desc:maincls.cmd.chapter} erklärt, verfügt \KOMAScript{}
bezüglich des optionalen Arguments der Gliederungsbefehle über erweiterte
Möglichkeiten. Um dies möglich zu machen, war es notwendig, einige Anweisungen
des \LaTeX-Kerns zu ersetzen. Dazu gehören auch die Anweisungen
\Macro{secdef}\IndexCmd{secdef}\important{\Macro{secdef}} und
\Macro{@startsection}\IndexCmd{@startsection}%
\important{\Macro{@startsection}}. Die Bedeutung der Parameter dieser
Anweisungen ist der Anleitung zum \LaTeX-Kern \cite{latex:source2e} zu
entnehmen.

Da diese Anweisungen jedoch auch häufig von Paketen komplett neu definiert
werden und dadurch die Funktion von \KOMAScript{} teilweise stark
beeinträchtigt werden kann, wurden die genannten \LaTeX-Kern-Anweisungen nicht
einfach nur umdefiniert, sondern es wurden zusätzliche die alternativen
Anweisungen \Macro{SecDef} und \Macro{scr@startsection} definiert. Diese
können von Paketautoren genau wie die \LaTeX-Kern-Anweisungen verwendet
werden, bieten dann aber automatisch die erweiterte Funktionalität von
\KOMAScript{}. Die beiden Anweisungen sollten jedoch nicht umdefiniert werden,
da sie sich jederzeit ändern können und dann die Funktionalität von
\KOMAScript{} durch diese Umdefinierung erneut beeinträchtigt werden
könnte.

\KOMAScript{} selbst verwendet intern \Macro{SecDef} und
\Macro{scr@startsection} an Stelle von \Macro{secdef} und
\Macro{@startsection} beispielsweise bei den Gliederungsbefehlen, die mit
\Macro{DeclareSectionCommand} definiert werden. Eine nachträgliche
Umdefinierung von \Macro{secdef} und \Macro{@startsection} hat daher keine
Auswirkungen auf diese Gliederungsbefehle.

Als Ersatz für die Umdefinierung der Anweisungen bietet \KOMAScript{} die
Möglichkeit, zusätzlichen \PName{Code} in die Ausführung der
\KOMAScript-eigenen Erweiterungen einzufügen. Der \PName{Code} aller Aufrufe
der Anweisungen \Macro{At@startsection}, \Macro{Before@sect} und
\Macro{Before@@sect} wird für die einzelnen Anweisungen getrennt aufgesammelt.
Es ist nicht vorgesehen, einmal eingefügten Code wieder zu entfernen.

Der \PName{Code} von \Macro{At@startsection} wird dabei in
\Macro{scr@startsection} unmittelbar nach der Auswertung von Parameter
\PName{Abstand davor} und der zugehörigen Berechnung des resultierenden
\Length{@tempskipa} aber noch vor Einfügen des Abstandes angewendet. Es ist
damit also noch möglich, diesen Abstand über \Length{@tempskipa} zu verändern.

Der \PName{Code} von \Macro{Before@sect} beziehungsweise
\Macro{Before@ssect} wird unmittelbar vor dem Aufruf von \Macro{@sect}
beziehungsweise \Macro{@ssect} innerhalb von \Macro{scr@startsection}
ausgeführt. Zu diesem Zeitpunkt ist gegebenenfalls der vertikale Abstand vor
der Überschrift bereits über \Macro{addvspace} eingefügt.

Die Anweisungen \Macro{At@startsection}, \Macro{Before@sect},
\Macro{Before@ssect} sind als Anweisungen für Paketautoren entworfen und für
diese zur Verwendung freigegeben.%
%
\EndIndex{Cmd}{scr@startsection}%
\EndIndex{Cmd}{Before@sect}%
\EndIndex{Cmd}{Before@ssect}%
\EndIndex{Cmd}{At@startsection}%

% \subsection{Anhang}
% \seclabel{appendix}

\begin{Declaration}
  \Macro{appendixmore}
\end{Declaration}%
\BeginIndex{Cmd}{appendixmore}%
Bei den {\KOMAScript}-Klassen gibt es innerhalb der Anweisung
\Macro{appendix}\IndexCmd{appendix}\important{\Macro{appendix}} eine
Besonderheit. Ist nämlich \Macro{appendixmore} definiert, so wird diese
Anweisung von \Macro{appendix} ebenfalls ausgeführt. Intern wird dies von den
{\KOMAScript}-Klassen \Class{scrbook}\OnlyAt{\Class{scrbook}\and
  \Class{scrreprt}} und \Class{scrreprt} für die Realisierung der Layoutoption
\Option{appendixprefix} genutzt (siehe \autoref{sec:maincls.structure},
\autopageref{desc:maincls.option.appendixprefix}). Dies\textnote{Achtung!}
sollten Sie unbedingt beachten, falls Sie selbst das Makro
\Macro{appendixmore} definieren oder umdefinieren wollen. Ist diese
Option verwendet, so erhalten Sie bei
\verb|\newcommand{\appendixmore}{|\dots\verb|}| eine Fehlermeldung.  Dadurch
soll verhindert werden, dass Sie die Optionen außer Kraft setzen, ohne es zu
merken.

\begin{Example}
  Sie wollen nicht, dass bei Verwendung der Klasse \Class{scrbook} oder
  \Class{scrreprt} im Hauptteil die Kapitel mit einer Präfixzeile versehen
  werden (siehe Layoutoption \Option{chapterprefix}
  in \autoref{sec:maincls.structure},
  \autopageref{desc:maincls.option.chapterprefix}).  Damit die Konsistenz
  gewahrt bleibt, wollen Sie auch nicht, dass eine solche Zeile im Anhang
  verwendet wird. Stattdessen soll in den Anhängen direkt vor dem
  Kapitelbuchstaben das Wort »Anhang« in der jeweiligen Sprache stehen. Dies
  soll auch für die Kolumnentitel gelten. Also verwenden Sie nicht die
  Layoutoption \Option{appendixprefix}, sondern
  definieren in der Dokumentpräambel:
\begin{lstcode}
  \newcommand*{\appendixmore}{%
    \renewcommand*{\chapterformat}{%
      \appendixname~\thechapter\autodot\enskip}%
    \renewcommand*{\chaptermarkformat}{%
      \appendixname~\thechapter\autodot\enskip}}
\end{lstcode}
  Sollten Sie später dann doch noch entscheiden, dass Sie die Option
  \Option{appendixprefix} verwenden wollen, so erhalten Sie aufgrund
  der dann bereits definierten Anweisung \Macro{appendixmore} eine
  Fehlermeldung. Damit wird verhindert, dass obige Definition
  unbemerkt die Einstellungen überschreibt, die Sie per Option
  getroffen haben.

  Wenn Sie ein vergleichbares Verhalten des Anhangs für die Klasse
  \Class{scrartcl} erreichen wollen, so ist dies ebenfalls möglich. Schreiben
  Sie dazu beispielsweise folgendes in die  Präambel Ihres Dokuments:
\begin{lstcode}[moretexcs={ifthenelse,equal}]
  \newcommand*{\appendixmore}{%
    \renewcommand*{\sectionformat}{%
      \appendixname~\thesection\autodot\enskip}%
    \renewcommand*{\sectionmarkformat}{%
      \appendixname~\thesection\autodot\enskip}}
\end{lstcode}

  Die Erklärungen zu den in diesem Beispiel umdefinierten Anweisungen finden
  Sie in \autoref{sec:maincls.structure},
  \autopageref{desc:maincls.cmd.chapterformat} und
  \autopageref{desc:maincls.cmd.chaptermarkformat}.
\end{Example}%
%
\EndIndex{Cmd}{appendixmore}%

% \subsection{Literaturverzeichnis}
% \seclabel{bibliography}

\begin{Declaration}
  \Macro{newbibstyle}\OParameter{Elternstil}\Parameter{Name}%^^A
  \Parameter{Anweisungen}\\
  \Macro{newblock}\\
  \Macro{@openbib@code}\\
  \Macro{bib@beginhook}\\
  \Macro{bib@endhook}
\end{Declaration}
\BeginIndex{Cmd}{newbibstyle}%
\BeginIndex{Cmd}{newblock}%
\BeginIndex{Cmd}{@openbib@code}%
\BeginIndex{Cmd}{bib@beginhook}%
\BeginIndex{Cmd}{bib@endhook}%
Schon die Standardklassen\textnote{Standardklassen} kennen zur Unterteilung
der Einträge in das Literaturverzeichnis die Anweisung \Macro{newblock}. Was
diese Anweisung genau macht, hängt dabei von den Klassenoptionen ab. Wird die
Option \Option{openbib}\important{\Option{openbib}} verwendet, so werden am Ende
der Standardklasse die Anweisungen \Macro{@openbib@code} und \Macro{newblock}
selbst umdefiniert. Von den Standardklassen wird die Anweisung
\Macro{@openbib@code} beim Start der Liste für das Literaturverzeichnis --
genauer: bei der Festlegung der Parameter für diese Liste -- ausgeführt. Es
darf davon ausgegangen werden, dass auch viele Pakete, die das
Literaturverzeichnis umdefinieren, diese Anweisung entsprechend abarbeiten.

Bei den \KOMAScript-Klassen\textnote{\KOMAScript} geschieht etwas
ähnliches. Allerdings wird \Macro{@openbib@code} nicht am Ende der Klasse
umdefiniert. Stattdessen wird mit \Macro{newbibstyle} der Stil
\PValue{openstyle} für das Literaturverzeichnis definiert. Die
\PName{Anweisungen}, die dabei in der Implementierung angegeben wurden,
beinhalten die gewünschten Umdefinierung von \Macro{@openbib@code} und von
\Macro{newblock}. Wird nun mit Hilfe der Option
\OptionValue{bibliography}{openstyle}%
\IndexOption{bibliography~=\PValue{openstyle}}%
\important{\OptionValue{bibliography}{openstyle}} dieser
Literaturverzeichnisstil gewählt, so werden die \PName{Anweisungen}
unmittelbar ausgeführt, also \Macro{@openbib@code} und \Macro{newblock}
umdefiniert.

Neben \Macro{@openbib@code} und \Macro{newblock} können in \PName{Anweisungen}
auch noch \Macro{bib@beginhook} und \Macro{bib@endhook} umdefiniert
werden. Die Anweisung \Macro{bib@beginhook} wird unmittelbar nach der
Überschrift und der Präambel des Literaturverzeichnisses, aber noch vor der
Liste mit den Literatureinträgen ausgeführt. Die Anweisung \Macro{bib@endhook}
wird direkt nach dieser Liste am Ende des Literaturverzeichnisses
ausgeführt. Im Falle eines mit \Macro{BreakBibliography} (siehe
\autoref{sec:maincls.bibliography},
\autopageref{desc:maincls.cmd.BreakBibliography}) unterbrochenen
Literaturverzeichnisses werden diese Anweisungen außerdem am Anfang und Ende
jedes Teil, also unmittelbar vor und nach \Macro{BreakBibliography}
ausgeführt.

Die Anweisungen \Macro{newblock}, \Macro{@openbib@code},
\Macro{bib@beginhook} und \Macro{bib@endhook} werden bei der Verwendung eines
neuen Literaturverzeichnisstils zunächst als leer definiert. Danach werden die
\PName{Anweisungen} des bei der Definition des Stils optional angegebenen
Elternstils ausgeführt und dann erst die \PName{Anweisungen}, die bei
Definition des neuen Stils angegeben wurden. Daraus ergibt sich auch, dass
jede der vier Anweisungen innerhalb von \PName{Anweisung} bei Bedarf
keinesfalls mit \Macro{newcommand}, sondern mit
\Macro{renewcommand}\IndexCmd{renewcommand}\important{\Macro{renewcommand}}
definiert werden sollten.

Setzt der Anwender mit den Anweisungen
\Macro{AtEndBibliography}%\important[i]{\Macro{AtEndBibliography}\\
%  \Macro{AfterBibliographyPreamble}}% Passt blöder Weise nicht!
\IndexCmd{AtEndBibliography} und
\Macro{AfterBibliographyPreamble}\IndexCmd{AfterBibliographyPreamble} weitere
\PName{Anweisungen} für die Ausführung nach der Präambel und am Ende des
Literaturverzeichnisses, so werden die mit \Macro{AfterBibliographyPreamble}
festgelegten \PName{Anweisungen} einmalig am Anfang des
Literaturverzeichnisses nach \Macro{bib@beginhook} und die mit
\Macro{AtEndBibliography} festgelegten \PName{Anweisungen} einmalig am Ende
des Literaturverzeichnisses vor \Macro{bib@endhook} ausgeführt.

Mit\textnote{Beispiel!} Hilfe des Pakets
\Package{multicol}\IndexPackage{multicol}\important{\Package{multicol}} (siehe
\cite{package:multicol}) könnte man beispielsweise einen Literaturstil für ein
zweispaltiges Literaturverzeichnis definieren:
% Umbruchkorrektur: listings korrigiert
\begin{lstcode}[belowskip=\dp\strutbox plus 1ex]
  \newbibstyle{twocolumstyle}{%
    \renewcommand*{\bib@beginhook}{\begin{multicols}{2}}%
    \renewcommand*{\bib@endhook}{\end{multicols}}}%
\end{lstcode}
Soll es außerdem eine \emph{open}-Variante davon geben, kann man hier die
Möglichkeiten der Vererbung verwenden und bei der Definition einen Elternstil
mit angeben:
% Umbruchkorrektur: listings korrigiert
\begin{lstcode}[belowskip=\dp\strutbox plus 1ex]
  \newbibstyle{twocolumopenstyle}[openstyle]{%
    \renewcommand*{\bib@beginhook}{\begin{multicols}{2}}%
    \renewcommand*{\bib@endhook}{\end{multicols}}}%
\end{lstcode}
Die Auswahl eines dieser neuen Stile erfolgt dann einfach wieder über die
Option \Option{bibliography}.
%
\EndIndex{Cmd}{bib@endhook}%
\EndIndex{Cmd}{bib@beginhook}%
\EndIndex{Cmd}{@openbib@code}%
\EndIndex{Cmd}{newblock}%
\EndIndex{Cmd}{newbibstyle}%



\section{Mehr oder weniger obsolete Optionen und Anweisungen}
\seclabel{obsolete}

\LoadNonFree{scrbookreportarticle-experts}{4}

\endinput

%%% Local Variables:
%%% mode: latex
%%% mode: flyspell
%%% coding: iso-latin-1
%%% ispell-local-dictionary: "de_DE"
%%% TeX-master: "guide.tex"
%%% End:

% LocalWords:  Sternvarianten Kapitelüberschrift Standardklassen Paketautoren
% LocalWords:  Klassenoptionen Gliederungsbefehlen Namensliste umzudefinieren

%  LocalWords:  Inhaltsverzeichniseintrags Abstandsanweisungen Sternformen
%  LocalWords:  Teilüberschriften Benutzerfreundlichkeit Absatzmarkierung
%  LocalWords:  umkonfiguriert Teileüberschrift Abschnittsüberschrift
%  LocalWords:  Absolutwert Gliederungsbefehls Präfixzeile Schrifteinstellung
%  LocalWords:  Zählername Spitzmarke Kolumnentitels Schrifteinstellungen
%  LocalWords:  Strichstärke expandierbar expandierbaren expandierbares
%  LocalWords:  spartanisch Kapitelstil Spitzmarken Formatierungsanweisungen
%  LocalWords:  Kapitelüberschriften Gliederungsebenen Verzeichniseinträge
%  LocalWords:  Verzeichniseintragsstile Gliederungsbefehl Verzeichniseintrag
%  LocalWords:  Verzeichniseintrags Verzeichniseintragsstilen
